# Environment Setup for Render Deployment

## Gemini AI Configuration

This application uses Google's Gemini AI for the AI Assistant feature. To enable this feature on Render, you need to configure the Gemini API key.

### Steps to Configure on Render:

1. **Get a Gemini API Key:**
   - Visit [Google AI Studio](https://aistudio.google.com/app/apikey)
   - Sign in with your Google account
   - Create a new API key
   - Copy the API key

2. **Configure in Render Dashboard:**
   - Go to your Render service dashboard
   - Navigate to **Environment** tab
   - Find the `GEMINI_API_KEY` variable
   - Paste your API key as the value
   - Save the changes

3. **Redeploy:**
   - Render will automatically redeploy your service with the new environment variable
   - The AI Assistant features will now be enabled

### Environment Variables

The following environment variables are required for the application:

- `GEMINI_API_KEY`: Your Google Gemini API key (set in Render Dashboard)
- `GEMINI_API_URL`: The Gemini API endpoint (already configured in render.yaml)
- `DATABASE_URL`: PostgreSQL connection string (already configured)
- `JWT_SECRET`: Secret for JWT access tokens (auto-generated by Render)
- `JWT_REFRESH_SECRET`: Secret for JWT refresh tokens (auto-generated by Render)

### Error Messages

If you see the following errors:
- **"AI Assistant is not configured"**: The GEMINI_API_KEY is not set in Render Dashboard
- **"Error communicating with Gemini AI"**: Check that your API key is valid and has not exceeded quota limits
- **"models/gemini-pro is not found"**: The API URL is using an outdated model name. Make sure `GEMINI_API_URL` is set to use `gemini-1.5-flash` or `gemini-1.5-pro`
- **"models/gemini-1.5-flash is not found for API version v1beta"**: The API key may have restrictions. Try using the v1 API endpoint instead of v1beta

### Model Information

The application uses `gemini-1.5-flash` with the v1 API by default, which is:
- Fast and efficient for most use cases
- Cost-effective
- Suitable for chat and content generation

If you need more advanced capabilities, you can set `GEMINI_API_URL` to use `gemini-1.5-pro` instead:
```
https://generativelanguage.googleapis.com/v1/models/gemini-1.5-pro:generateContent
```

**Note:** If you encounter model not found errors, ensure your API key has access to the Gemini 1.5 models. Some API keys may be restricted to older models or specific API versions.

### For Local Development

Copy `apps/backend/.env.example` to `apps/backend/.env` and fill in your local values:

```bash
cd apps/backend
cp .env.example .env
# Edit .env with your actual values
```
