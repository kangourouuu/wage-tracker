services:
- type: web
  name: wage-tracker-backend
  plan: free
  runtime: node
  buildCommand: "cd apps/backend && yarn install --frozen-lockfile && yarn tsc"
  startCommand: "cd apps/backend && yarn start:prod"
  envVars:
  - key: NODE_ENV
    value: production
  - key: PORT
    value: 3000
  - key: JWT_SECRET
    generateValue: true
  - key: JWT_REFRESH_SECRET
    generateValue: true
  - key: JWT_ACCESS_EXP
    value: 15m
  - key: JWT_REFRESH_EXP
    value: 30d
  - key: FRONTEND_URL
    value: "*"
  - key: DATABASE_URL
    value: "postgresql://neondb_owner:npg_fpo1bYjlQK7a@ep-jolly-sun-a1ptgjch-pooler.ap-southeast-1.aws.neon.tech/wage-tracker-db?sslmode=require&channel_binding=require"
  - key: GEMINI_API_KEY
    sync: false  # This should be set in Render Dashboard for security
  - key: GEMINI_API_URL
    value: "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent"
